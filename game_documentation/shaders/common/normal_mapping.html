<!doctype html>
<html class="no-js" lang="en" data-content_root="../../../">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../../../genindex.html" /><link rel="search" title="Search" href="../../../search.html" /><link rel="next" title="Weather" href="weather.html" /><link rel="prev" title="Physically Based Rendering (PBR)" href="pbr.html" />
        <link rel="canonical" href="https://hedge-dev.github.io/HedgehogEngineBlenderIO/game_documentation/shaders/common/normal_mapping.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Normal Mapping - HEIO 0.0.1 Manual</title>
      <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="../../../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../../../_static/styles/furo-extensions.css?v=302659d7" />
    <link rel="stylesheet" type="text/css" href="../../../_static/css/theme_overrides.css?v=b401e04f" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  --color-brand-primary: #265787;
  --color-brand-content: #265787;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../../index.html"><div class="brand">HEIO 0.0.1 Manual</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../../index.html">
  
  
  <span class="sidebar-brand-text">HEIO 0.0.1 Manual</span>
  
</a><form class="sidebar-search-container" method="get" action="../../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/about.html">About HEIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/installation.html">Installing HEIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started/contact.html">Contact</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sections</span></p>
<ul class="current">
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../user_interface/index.html">User Interface</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of User Interface</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../user_interface/settings.html">Scene Settings</a></li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../user_interface/tools/index.html">Tools</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Tools</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../user_interface/tools/importers.html">Importers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../user_interface/tools/exporters.html">Exporters</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../user_interface/tools/viewport_toolbar/index.html">Viewport Toolbar</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Viewport Toolbar</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../user_interface/tools/viewport_toolbar/material.html">Material Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../user_interface/tools/viewport_toolbar/info.html">Info Tools</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../../user_interface/object/index.html">Object Related</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Object Related</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3 has-children"><a class="reference internal" href="../../../user_interface/object/material.html">Material Properties</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Material Properties</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../user_interface/object/material_parameters.html">Material Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../user_interface/object/material_textures.html">Material Textures</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../user_interface/sca_parameters.html">SCA Parameters</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../guides/index.html">Guides</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of Guides</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/addon_config.html">Configuring the addon</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/project_setup.html">Project setup</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../guides/material_editing.html">Material Editing</a></li>
</ul>
</li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="../../index.html">Game documentation</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Game documentation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 has-children"><a class="reference internal" href="../../textures/index.html">Textures</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Textures</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../textures/textures_he1.html">Hedgehog engine 1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../textures/textures_he2.html">Hedgehog engine 2</a></li>
</ul>
</li>
<li class="toctree-l2 current has-children"><a class="reference internal" href="../index.html">Shaders</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" role="switch" type="checkbox"/><label for="toctree-checkbox-9"><div class="visually-hidden">Toggle navigation of Shaders</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l3 current has-children"><a class="reference internal" href="index.html">Common</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" role="switch" type="checkbox"/><label for="toctree-checkbox-10"><div class="visually-hidden">Toggle navigation of Common</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="pbr.html">Physically Based Rendering (PBR)</a></li>
<li class="toctree-l4 current current-page"><a class="current reference internal" href="#">Normal Mapping</a></li>
<li class="toctree-l4"><a class="reference internal" href="weather.html">Weather</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../unleashed/index.html">Sonic Unleashed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../generations/index.html">Sonic Generations</a></li>
<li class="toctree-l3"><a class="reference internal" href="../lost_world/index.html">Sonic Lost World</a></li>
<li class="toctree-l3"><a class="reference internal" href="../forces/index.html">Sonic Forces</a></li>
<li class="toctree-l3"><a class="reference internal" href="../origins/index.html">Sonic Origins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../frontiers/index.html">Sonic Frontiers</a></li>
<li class="toctree-l3 has-children"><a class="reference internal" href="../shadow_generations/index.html">Shadow Generations</a><input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" role="switch" type="checkbox"/><label for="toctree-checkbox-11"><div class="visually-hidden">Toggle navigation of Shadow Generations</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/amoeba.html">Amoeba shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/blend.html">Blend Shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/bubbles.html">Bubbles shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/chaos.html">Chaos shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/character_eye.html">Character Eye shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/character_falloff.html">Character Falloff shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/character_skin.html">Character skin shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/cloud_mist.html">Cloud &amp; Mist shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/common.html">Common shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/cyber.html">Cyber shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/decal.html">Decal shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/detail.html">Detail shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/dpower.html">DPower shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/earth.html">Earth shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/effadhoc.html">Effadhoc shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/emission.html">Emission shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/fur.html">Fur shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/glass.html">Glass shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/ignorelight.html">IgnoreLight shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/imposter.html">Imposter shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/indirect.html">Indirect shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/instanced.html">Instanced shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/iridescence.html">Iridescence shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/jewel.html">Jewel shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/kaleidoscope.html">Kaleidoscope shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/maria.html">Maria shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/mephiles.html">Mephiles shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/plants.html">Plant shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/ring.html">Ring shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/search_light.html">SearchLight shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/sky.html">Sky shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/sonic_aura.html">SonicAura shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/super_sonic_shape.html">SuperSonicShape shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/timeeater.html">Time eater shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/translucent.html">Translucent shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/trans_thin.html">TransThin shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/unlit.html">Unlit shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/vanish.html">Vanish shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/volcanic_ash.html">Volcanic Ash shader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/volumevat.html">Volume VAT shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/water.html">Water shaders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../shadow_generations/whitespace.html">Whitespace shaders</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../shader_features.html">Shader Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../sca_parameters.html">SCA Parameters</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../../target_configuration/index.html">Target Configuration</a><input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" role="switch" type="checkbox"/><label for="toctree-checkbox-12"><div class="visually-hidden">Toggle navigation of Target Configuration</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../target_configuration/target_info.html">Target Info</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../target_configuration/shaders.html">Shaders</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../target_configuration/material_templates.html">Material Templates</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../target_configuration/sca_parameters.html">SCA Parameters</a></li>
</ul>
</li>
</ul>

</div></div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="edit-this-page">
  <a class="muted-link" href="https://github.com/hedge-dev/HedgehogEngineBlenderIO/edit/dev/manual/source/game_documentation/shaders/common/normal_mapping.rst" title="Edit this page">
    <svg><use href="#svg-pencil"></use></svg>
    <span class="visually-hidden">Edit this page</span>
  </a>
</div><div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="normal-mapping">
<span id="shaders-common-normal-mapping"></span><h1>Normal Mapping<a class="headerlink" href="#normal-mapping" title="Link to this heading">¶</a></h1>
<p>Normal mapping, also known as “bump mapping”, is a texturing technique used alter surface normals
and allow for more complex interaction with lighting and other rendering features.</p>
<section id="what-are-normals">
<h2>What are normals?<a class="headerlink" href="#what-are-normals" title="Link to this heading">¶</a></h2>
<p>Fundamentally, normals are directions stored as unit-vectors ({x,y,z} coordinates that have a
distance of 1 to the origin {0,0,0}). These are stored on vertices, triangles and/or triangle corners
(also known in blender as a “split” or a “loop”) and specify which direction said element is
pointing in.</p>
<p>You can visualize these in blender while in edit mode by enabling any of the “Normals”
checks in the mesh edit overlay:</p>
<figure class="align-default" id="id1" style="width: 75%">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_blender_display.png" src="../../../_images/gamedoc_shaders_normal_mapping_blender_display.png" />
<figcaption>
<p><span class="caption-text">A mesh in blenders edit mode with vertex normals visualized</span><a class="headerlink" href="#id1" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
<section id="example-use-case-sunlight">
<h2>Example use case: Sunlight<a class="headerlink" href="#example-use-case-sunlight" title="Link to this heading">¶</a></h2>
<p>Normals have a variety of use cases, and in the case of 3D rendering, one big use case is
“Lighting”! The most simple form of lighting can be achieved using a “<strong>sunlight</strong>”: A light
that, at its core, is just the direction in which the light “travels”.</p>
<p>To see how “shaded” a surface is, we check the angle*¹ between the surface normal and the
sunlight direction:</p>
<ul class="simple">
<li><p>At 180° (“facing the sun”) the surface has a light influence of 1 and receives no shading.</p></li>
<li><p>The closer we get to a 90° angle, the lower the light influence.</p></li>
<li><p>At 90° we have a light influence of 0 and the surface is fully “shaded”.</p></li>
<li><p>Angles between 90° and 0° have a negative light influence that gets rounded up to 0.</p></li>
</ul>
<figure class="align-default" id="id2" style="width: 75%">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_sunlight.png" src="../../../_images/gamedoc_shaders_normal_mapping_sunlight.png" />
<figcaption>
<p><span class="caption-text">A mesh in blenders edit mode with vertex normals visualized</span><a class="headerlink" href="#id2" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>*¹ It’s not actually the angle we calculate, but the dot product. The actual angle can be
obtained by inputting the dot product into the <em>arccos</em> function.</p>
<p>More precise info can be found below.</p>
</div>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-light-bulb" viewBox="0 0 16 16" aria-hidden="true"><path d="M8 1.5c-2.363 0-4 1.69-4 3.75 0 .984.424 1.625.984 2.304l.214.253c.223.264.47.556.673.848.284.411.537.896.621 1.49a.75.75 0 0 1-1.484.211c-.04-.282-.163-.547-.37-.847a8.456 8.456 0 0 0-.542-.68c-.084-.1-.173-.205-.268-.32C3.201 7.75 2.5 6.766 2.5 5.25 2.5 2.31 4.863 0 8 0s5.5 2.31 5.5 5.25c0 1.516-.701 2.5-1.328 3.259-.095.115-.184.22-.268.319-.207.245-.383.453-.541.681-.208.3-.33.565-.37.847a.751.751 0 0 1-1.485-.212c.084-.593.337-1.078.621-1.489.203-.292.45-.584.673-.848.075-.088.147-.173.213-.253.561-.679.985-1.32.985-2.304 0-2.06-1.637-3.75-4-3.75ZM5.75 12h4.5a.75.75 0 0 1 0 1.5h-4.5a.75.75 0 0 1 0-1.5ZM6 15.25a.75.75 0 0 1 .75-.75h2.5a.75.75 0 0 1 0 1.5h-2.5a.75.75 0 0 1-.75-.75Z"></path></svg></span><span class="sd-summary-text">The math behind</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text">The math to obtain the light influence is very simple:</p>
<blockquote>
<div><p class="sd-card-text">N.x * S.x + N.y * S.y + N.z * S.z</p>
<div class="line-block">
<div class="line">N = Normal vector</div>
<div class="line">S = (Inverted) Sunlight direction vector</div>
</div>
</div></blockquote>
<p class="sd-card-text">This formula is called the “<strong>Dot Product</strong>”, and is used so much in 3D computing that GPUs
have special circuitry to calculate the dot product as fast as possible!</p>
<p class="sd-card-text">Here is how you can calculate it in blender:</p>
<figure class="align-default" id="id3">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_sunlight_nodes.png" src="../../../_images/gamedoc_shaders_normal_mapping_sunlight_nodes.png" />
<figcaption>
<p><span class="caption-text">The blender node setup for calculating the dot product using a sunlight vector</span><a class="headerlink" href="#id3" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p class="sd-card-text">Blender does not actually give us access to a sunlight direction by default, which is why
it was “recreated” for this setup using a (0,0,-1) vector</p>
</div>
</div>
</details></section>
<section id="manipulating-normals-using-textures">
<h2>Manipulating normals using textures<a class="headerlink" href="#manipulating-normals-using-textures" title="Link to this heading">¶</a></h2>
<p>This is where normal mapping comes into play: We can create an image where each pixel stores
a normal that we can “add” to the normal on a surface! This way we can alter normals in between
vertices, instead of just interpolating the normals between vertices.</p>
<p>A normal map uses each color channel to encode the components of a normal vector, where the
value range from -1 to 1 gets remapped to the color channel range from 0 to 1 with the following mapping:</p>
<div class="table-wrapper colwidths-auto docutils container">
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Channel</p></th>
<th class="head"><p>Axis</p></th>
<th class="head"><p>Direction (0-&gt;1)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Red</p></td>
<td><p>X+</p></td>
<td><p>Left-&gt;Right</p></td>
</tr>
<tr class="row-odd"><td><p>Green</p></td>
<td><p>Y+</p></td>
<td><p>Down-&gt;Up</p></td>
</tr>
<tr class="row-even"><td><p>Blue</p></td>
<td><p>Z+</p></td>
<td><p>Backward-&gt;Forward</p></td>
</tr>
</tbody>
</table>
</div>
<p>The default color, at which a normal map does not alter the surface normal, is #8080FF
(the color code for {0,0,1}).</p>
<figure class="align-default" id="id4" style="width: 75%">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_tex_lit.png" src="../../../_images/gamedoc_shaders_normal_mapping_tex_lit.png" />
<figcaption>
<p><span class="caption-text">A normal map image and a surface with the normal map applied and hit by a sunlight angled at 45°.</span><a class="headerlink" href="#id4" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Blenders standard
<a class="reference external" href="https://docs.blender.org/manual/en/latest/render/shader_nodes/vector/normal_map.html">normal map node</a>
requires the blue channel to be provided by the input, whereas Hedgehog Engine games don’t, as they
derive the blue channel based on the red and green channels while rendering.</p>
<div class="line-block">
<div class="line">This works because, as mentioned above, a normal direction has to be a unit vector.</div>
<div class="line">If the X and Y components sampled from a normal map are not a unit away from the origin, then the
engine calculates a Z component that makes the normal a unit vector.</div>
</div>
<figure class="align-default" id="id5" style="width: 75%">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_blue_calc.png" src="../../../_images/gamedoc_shaders_normal_mapping_blue_calc.png" />
<figcaption>
<p><span class="caption-text">A normal map without the blue channel (left) and the same one with the blue channel derived from the red and green channel (right)</span><a class="headerlink" href="#id5" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<details class="sd-sphinx-override sd-dropdown sd-card sd-mb-3">
<summary class="sd-summary-title sd-card-header">
<span class="sd-summary-icon"><svg version="1.1" width="1.0em" height="1.0em" class="sd-octicon sd-octicon-graph" viewBox="0 0 16 16" aria-hidden="true"><path d="M1.5 1.75V13.5h13.75a.75.75 0 0 1 0 1.5H.75a.75.75 0 0 1-.75-.75V1.75a.75.75 0 0 1 1.5 0Zm14.28 2.53-5.25 5.25a.75.75 0 0 1-1.06 0L7 7.06 4.28 9.78a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042l3.25-3.25a.75.75 0 0 1 1.06 0L10 7.94l4.72-4.72a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042Z"></path></svg></span><span class="sd-summary-text">Formula for calculating the blue channel</span><span class="sd-summary-state-marker sd-summary-chevron-right"><svg version="1.1" width="1.5em" height="1.5em" class="sd-octicon sd-octicon-chevron-right" viewBox="0 0 24 24" aria-hidden="true"><path d="M8.72 18.78a.75.75 0 0 1 0-1.06L14.44 12 8.72 6.28a.751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018l6.25 6.25a.75.75 0 0 1 0 1.06l-6.25 6.25a.75.75 0 0 1-1.06 0Z"></path></svg></span></summary><div class="sd-summary-content sd-card-body docutils">
<p class="sd-card-text"><code class="docutils literal notranslate"><span class="pre">B</span> <span class="pre">=</span> <span class="pre">sqrt(1</span> <span class="pre">-</span> <span class="pre">((R</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">-</span> <span class="pre">1)²</span> <span class="pre">+</span> <span class="pre">(G</span> <span class="pre">*</span> <span class="pre">2</span> <span class="pre">-</span> <span class="pre">1)²))</span> <span class="pre">*</span> <span class="pre">0.5</span> <span class="pre">+</span> <span class="pre">0.5</span></code></p>
<div class="line-block">
<div class="line">R = Red</div>
<div class="line">G = Green</div>
<div class="line">B = Blue</div>
<div class="line">Channels in range 0 to 1</div>
</div>
</div>
</details><section id="tangent-space">
<h3>Tangent space<a class="headerlink" href="#tangent-space" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is a highly technical topic and may not need to read it.</p>
</div>
<p>Normal maps come with a big issue: What is considered “up/down” and “left/right”? All we know
without a doubt is that “forward/backward” is based on the normal that we want to add to, but
how do we correctly apply the normal map?</p>
<p>This is where tangent space becomes relevant: The tangent of a normal points to the “right” of
the normal (and the “binormal” would be perpendicular to the normal and tangent).</p>
<p>However, obtaining the tangent is a bit complicated. In the early days of normal maps, there was
no consistent way to get a tangent, and there were many different ways to do so.</p>
<p>The naive answer would be to just take whatever direction “right” is in object space, which would
work as long as all normal maps are facing perfectly upwards, but the moment a texture gets
slightly rotated, the lighting looks very off.</p>
<figure class="align-default" id="id6" style="width: 75%">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_tangent_problem.png" src="../../../_images/gamedoc_shaders_normal_mapping_tangent_problem.png" />
<figcaption>
<p><span class="caption-text">Surfaces with normal maps and lighting applied. The top row UVs were left as is while the bottom ones have been rotated by 135°. The normal maps on the left use blender provided tangents, while the ones on the right use custom tangents based on the normal direction in object space.</span><a class="headerlink" href="#id6" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Fortunately nowadays most 3D software (including blender and Hedgehog Engine 2) uses “MikkTSpace”,
which was introduced in 2011 and bases the tangent off the texture coordinates, which also
automatically aligns the tangent with how a standard normal map would be used.</p>
<p>The easiest way to visualize MikkTSpace is by using a texture that shows “up” and “right” and
displaying those via a material:</p>
<figure class="align-default" id="id7" style="width: 75%">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_mikktspace.png" src="../../../_images/gamedoc_shaders_normal_mapping_mikktspace.png" />
<figcaption>
<p><span class="caption-text">MikkTSpace visualized using a texture. Green points “up”, red points “right”</span><a class="headerlink" href="#id7" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>Older games may have used normals that depended on the non-standard tangents, and can thus look
weird after importing. Unfortunately, blender supports no way of importing tangents or modifying
them beyond being calculated.</p>
</section>
</section>
<section id="creating-normal-maps">
<h2>Creating normal maps<a class="headerlink" href="#creating-normal-maps" title="Link to this heading">¶</a></h2>
<p>There are 2 primary ways by which normal maps are created:</p>
<section id="height-mapping">
<h3>Height mapping<a class="headerlink" href="#height-mapping" title="Link to this heading">¶</a></h3>
<p>Height maps are exactly what the name implies: a texture depicting a height. We can use such a
height map to generate a normal texture:</p>
<figure class="align-default" id="id8">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_heightmap.png" src="../../../_images/gamedoc_shaders_normal_mapping_heightmap.png" />
<figcaption>
<p><span class="caption-text">A height map image and a the corresponding normal map generated from it</span><a class="headerlink" href="#id8" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<p>There exist many tools to create normal maps from height maps, such as</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.nvidia.com/texture-tools/index.html">Nvidia texture tools</a></p></li>
<li><p><a class="reference external" href="https://www.adobe.com/products/substance3d/apps/designer.html">Substance designer</a></p></li>
<li><p><a class="reference external" href="https://www.gimp.org/">Gimp</a></p></li>
<li><p><a class="reference external" href="https://cpetry.github.io/NormalMap-Online/">Normal Map Online (Webtool)</a></p></li>
</ul>
<p>You can even use heightmaps in blender directly using the
<a class="reference external" href="https://docs.blender.org/manual/en/4.3/render/shader_nodes/vector/bump.html">Bump node</a>.</p>
</section>
<section id="baking">
<h3>Baking<a class="headerlink" href="#baking" title="Link to this heading">¶</a></h3>
<p>Blender has a feature called “texture baking” with which you can project normals from a more
detailed mesh onto a simpler one and save it to an image.</p>
<p>You can read more about it <a class="reference external" href="https://docs.blender.org/manual/en/latest/render/cycles/baking.html">here</a>.</p>
<figure class="align-default" id="id9" style="width: 75%">
<img alt="../../../_images/gamedoc_shaders_normal_mapping_baking.png" src="../../../_images/gamedoc_shaders_normal_mapping_baking.png" />
<figcaption>
<p><span class="caption-text">A detailed mesh (top left), a low poly sphere (top right), the normal map that was baked from the detailed mesh onto the low poly sphere (bottom left) and the low poly sphere with the normal map applied (bottom right)</span><a class="headerlink" href="#id9" title="Link to this image">¶</a></p>
</figcaption>
</figure>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="weather.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Weather</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="pbr.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Physically Based Rendering (PBR)</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 
            </div>
            Made with 
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2024-12-22</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
<div class="footer-contribute">
  <ul>
    <li>
	  <a href="https://github.com/hedge-dev/HedgehogEngineBlenderIO/tree/dev/manual/source/game_documentation/shaders/common/normal_mapping.rst?plain=1"> View Source</a>
    </li>
    <li>
      <a href="https://github.com/hedge-dev/HedgehogEngineBlenderIO/issues/new?template=.gitea/issue_template/bug.yaml&field:body=%2A%2APage+Information%2A%2A%0D%0AFile%3A+%60manual%2Fgame_documentation/shaders/common/normal_mapping.rst%60%0D%0APermanent+Link%5D%28https%3A%2F%2Fdocs.blender.org%2Fmanual%2Fgame_documentation/shaders/common/normal_mapping.html%29%0D%0A%0D%0A%2A%2AShort+description+of+error%2A%2A%0D%0A%5BPlease+fill+out+a+short+description+of+the+error+here%5D%0D%0A"> Report issue on this page</a>
    </li>
  </ul>
</div>
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Normal Mapping</a><ul>
<li><a class="reference internal" href="#what-are-normals">What are normals?</a></li>
<li><a class="reference internal" href="#example-use-case-sunlight">Example use case: Sunlight</a></li>
<li><a class="reference internal" href="#manipulating-normals-using-textures">Manipulating normals using textures</a><ul>
<li><a class="reference internal" href="#tangent-space">Tangent space</a></li>
</ul>
</li>
<li><a class="reference internal" href="#creating-normal-maps">Creating normal maps</a><ul>
<li><a class="reference internal" href="#height-mapping">Height mapping</a></li>
<li><a class="reference internal" href="#baking">Baking</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../../../_static/documentation_options.js?v=982cab65"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../../_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="../../../_static/design-tabs.js?v=f930bc37"></script>
    </body>
</html>